(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4450)}])},4450:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return h}});var t=n(5893),s=n(1664),a=n.n(s),i=n(4184),u=n.n(i),c=n(7294),o=n(6792);var d=c.forwardRef((({bsPrefix:e,className:r,striped:n,bordered:s,borderless:a,hover:i,size:c,variant:d,responsive:l,...f},p)=>{const v=(0,o.vE)(e,"table"),h=u()(r,v,d&&`${v}-${d}`,c&&`${v}-${c}`,n&&`${v}-striped`,s&&`${v}-bordered`,a&&`${v}-borderless`,i&&`${v}-hover`),x=(0,t.jsx)("table",{...f,className:h,ref:p});if(l){let e=`${v}-responsive`;return"string"===typeof l&&(e=`${e}-${l}`),(0,t.jsx)("div",{className:e,children:x})}return x})),l=n(9928),f=n(3264),p=n(4232),v=n(9540),h=function(){var e,r=(0,p.r)(l.u),n=(r.execute,r.status),s=r.value,i=r.error,u=null;"success"===n?u=(0,t.jsx)("div",{className:"m-2",children:(0,t.jsxs)(d,{striped:!0,bordered:!0,hover:!0,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Username"}),(0,t.jsx)("th",{children:"# Tracks Listened To"}),(0,t.jsx)("th",{children:"# of Friends"})]})}),(0,t.jsx)("tbody",{children:null===(e=s||[])||void 0===e?void 0:e.map((function(e){var r=e.username,n=e.friends,s=e.tracksListenedTo;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(a(),{href:"/user/[username]",as:"/user/".concat(r),children:r})}),(0,t.jsx)("td",{children:s}),(0,t.jsx)("td",{children:n.length})]},r)}))})]})}):u=(0,t.jsx)(f.Z,{status:n,error:i});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{message:"User List"}),u]})}},3264:function(e,r,n){"use strict";var t=n(5893),s=n(6968);r.Z=function(e){var r=e.status,n=e.error;return"pending"===r?(0,t.jsx)(s.Z,{animation:"border"}):"error"===r?(0,t.jsx)("div",{children:n}):"idle"===r?(0,t.jsx)("div",{children:"Nothing is happening..."}):null}},9540:function(e,r,n){"use strict";var t=n(5893),s=n(1608),a=n(1555);r.Z=function(e){var r=e.message,n=e.rightMsg,i=void 0===n?null:n;return(0,t.jsx)("div",{className:"bg-secondary text-white p-1",children:(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(a.Z,{xs:2,children:r}),(0,t.jsx)(a.Z,{xs:10,children:i})]})})}},9928:function(e,r,n){"use strict";n.d(r,{P:function(){return k},u:function(){return j}});var t=n(7568),s=n(828),a=n(9815),i=n(4051),u=n.n(i),c=n(9669),o=n.n(c),d="https://mauvelous-leopard-5257.twil.io",l="/friends",f="/friend-detail",p="/plays",v="/plays-detail",h=function(){var e=(0,t.Z)(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(d).concat(l),e.next=3,o().get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,t.Z)(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(d).concat(p),e.next=3,o().get(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,t.Z)(u().mark((function e(r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("".concat(d).concat(r));case 2:return n=e.sent,e.abrupt("return",n.data.friends||[]);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,t.Z)(u().mark((function e(r){var n,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,o().get("".concat(d).concat(r));case 3:return t=e.sent,e.abrupt("return",(null===(n=t.data.plays)||void 0===n?void 0:n.length)||0);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),j=function(){var e=(0,t.Z)(u().mark((function e(){var r,n,t,i,c,o,d,l,f,p,v,j,k,w,y,g,Z;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Promise.all([h(),x()]);case 3:n=e.sent,t=(0,s.Z)(n,2),i=t[0],c=t[1],o=i.friends.map((function(e){var r=e.username,n=e.uri,t=c.plays.find((function(e){return e.username===r}));return{friends:[],tracksListenedTo:0,username:r,friendDetailUri:n,playsDetailUri:t?t.uri:void 0}})),(r=o).push.apply(r,(0,a.Z)(c.plays.filter((function(e){return!o.find((function(r){return r.username===e.username}))})).map((function(e){return{username:e.username,playsDetailUri:e.uri,tracksListenedTo:0,friends:[]}})))),d=!0,l=!1,f=void 0,e.prev=8,p=o[Symbol.iterator]();case 10:if(d=(v=p.next()).done){e.next=25;break}return j=v.value,k=j.friendDetailUri,w=j.playsDetailUri,e.t0=s.Z,e.next=16,Promise.all([k?m(k):Promise.resolve([]),w?b(w):Promise.resolve(0)]);case 16:e.t1=e.sent,y=(0,e.t0)(e.t1,2),g=y[0],Z=y[1],j.friends=g,j.tracksListenedTo=Z;case 22:d=!0,e.next=10;break;case 25:e.next=31;break;case 27:e.prev=27,e.t2=e.catch(8),l=!0,f=e.t2;case 31:e.prev=31,e.prev=32,d||null==p.return||p.return();case 34:if(e.prev=34,!l){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return e.abrupt("return",o);case 40:case"end":return e.stop()}}),e,null,[[8,27,31,39],[32,,34,38]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,t.Z)(u().mark((function e(r){var n,t,a,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",void 0);case 2:return n="".concat(f,"?username=").concat(r),t="".concat(v,"?username=").concat(r),e.t0=s.Z,e.next=7,Promise.all([m(n),b(t)]);case 7:return e.t1=e.sent,a=(0,e.t0)(e.t1,2),i=a[0],c=a[1],e.abrupt("return",{username:r,friends:i,tracksListenedTo:c,friendDetailUri:n,playsDetailUri:t});case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},4232:function(e,r,n){"use strict";n.d(r,{r:function(){return s}});var t=n(7294),s=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,t.useState)("idle"),s=n[0],a=n[1],i=(0,t.useState)(void 0),u=i[0],c=i[1],o=(0,t.useState)(void 0),d=o[0],l=o[1],f=(0,t.useCallback)((function(){return a("pending"),c(void 0),l(void 0),e().then((function(e){c(e),a("success")})).catch((function(e){l(e),a("error")}))}),[e]);return(0,t.useEffect)((function(){r&&f()}),[f,r]),{execute:f,status:s,value:u,error:d}}}},function(e){e.O(0,[900,774,888,179],(function(){return r=8312,e(e.s=r);var r}));var r=e.O();_N_E=r}]);